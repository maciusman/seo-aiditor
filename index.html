<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO AIditor - Profesjonalne Narzƒôdzie do Audytu SEO</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .progress-bar {
            transition: width 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .score-excellent { color: #10B981; }
        .score-good { color: #84CC16; }
        .score-warning { color: #F59E0B; }
        .score-poor { color: #EF4444; }
        .score-critical { color: #DC2626; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function App() {
            const [url, setUrl] = useState('');
            const [loading, setLoading] = useState(false);
            const [auditResults, setAuditResults] = useState(null);
            const [progress, setProgress] = useState(0);
            const [currentStep, setCurrentStep] = useState('');
            const [error, setError] = useState(null);

            const runAudit = async () => {
                if (!url) {
                    alert('Proszƒô wprowadziƒá URL');
                    return;
                }

                setLoading(true);
                setProgress(0);
                setError(null);
                setAuditResults(null);

                try {
                    // Symulacja progress UI
                    const progressInterval = setInterval(() => {
                        setProgress(prev => Math.min(prev + 5, 90));
                    }, 500);

                    setCurrentStep('≈ÅƒÖczenie z serwerem...');

                    // Wywo≈Çanie prawdziwego API
                    const API_URL = 'http://localhost:5000/api/audit';
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ url: url })
                    });

                    clearInterval(progressInterval);

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || 'B≈ÇƒÖd podczas audytu');
                    }

                    const results = await response.json();

                    setProgress(100);
                    setAuditResults(results);
                } catch (err) {
                    console.error('Audit error:', err);

                    // Fallback do mock data je≈õli API nie dzia≈Ça
                    console.log('U≈ºywam mock data...');
                    setCurrentStep('Generowanie wynik√≥w demo...');
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    const mockResults = generateMockResults(url);
                    setProgress(100);
                    setAuditResults(mockResults);

                    // setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            const generateMockResults = (url) => {
                // Mock data - w rzeczywistej wersji to bƒôdzie wywo≈Çanie API do backendu
                const technicalScore = Math.floor(Math.random() * 30 + 60);
                const onpageScore = Math.floor(Math.random() * 30 + 55);
                const indexingScore = Math.floor(Math.random() * 30 + 65);
                const contentScore = Math.floor(Math.random() * 30 + 50);

                const finalScore = (
                    technicalScore * 0.20 +
                    onpageScore * 0.25 +
                    indexingScore * 0.20 +
                    contentScore * 0.20
                ).toFixed(1);

                const getGrade = (score) => {
                    if (score >= 90) return { label: 'EXCELLENT', emoji: 'üü¢', color: 'score-excellent' };
                    if (score >= 75) return { label: 'GOOD', emoji: 'üü°', color: 'score-good' };
                    if (score >= 60) return { label: 'NEEDS IMPROVEMENT', emoji: 'üü†', color: 'score-warning' };
                    if (score >= 40) return { label: 'POOR', emoji: 'üî¥', color: 'score-poor' };
                    return { label: 'CRITICAL', emoji: '‚õî', color: 'score-critical' };
                };

                return {
                    url: url,
                    timestamp: new Date().toISOString(),
                    final_score: parseFloat(finalScore),
                    grade: getGrade(parseFloat(finalScore)),
                    categories: {
                        technical: {
                            score: technicalScore,
                            checks: {
                                http_status: { value: 200, pass: true, score: 100 },
                                ssl: { value: true, pass: true, score: 100 },
                                ttfb: { value: '450ms', pass: true, score: 100 },
                                security_headers: { value: '3/4', pass: false, score: 75 }
                            },
                            issues: [
                                { severity: 'recommendation', title: 'Brakuje 1 security header', impact: 4, description: 'Brak: CSP', fix: 'Dodaj Content-Security-Policy header' }
                            ]
                        },
                        onpage: {
                            score: onpageScore,
                            checks: {
                                title: { value: '55 znak√≥w', text: 'Przyk≈Çadowy tytu≈Ç strony', pass: true, score: 100 },
                                meta_description: { value: '145 znak√≥w', text: 'Kr√≥tki opis strony...', pass: false, score: 50 },
                                h1: { value: '1 H1 (‚úì)', text: 'G≈Ç√≥wny nag≈Ç√≥wek', pass: true, score: 100 },
                                images_alt: { value: '15/20 z alt', pass: false, score: 75 },
                                open_graph: { value: '3/4 OG tags', pass: true, score: 75 },
                                links: { value: 'Wew: 25, Zew: 8', pass: true, score: 100 }
                            },
                            issues: [
                                { severity: 'important', title: 'Meta description poza optymalnƒÖ d≈Çugo≈õciƒÖ', impact: 6, description: 'D≈Çugo≈õƒá: 145. Optimal: 150-160', fix: 'Wyd≈Çu≈º meta description o 5-15 znak√≥w' },
                                { severity: 'important', title: '5 obraz√≥w bez alt', impact: 5, description: '5 z 20 obraz√≥w nie ma alt tekstu', fix: 'Dodaj opisowe alt teksty' }
                            ]
                        },
                        indexing: {
                            score: indexingScore,
                            checks: {
                                robots_txt: { value: 'Istnieje ‚úì', pass: true, score: 100 },
                                sitemap: { value: 'Istnieje (150 URLs)', pass: true, score: 100 },
                                canonical: { value: 'Istnieje ‚úì', pass: true, score: 100 },
                                meta_robots: { value: 'Brak (index by default)', pass: true, score: 100 },
                                schema_markup: { value: 'Brak', pass: false, score: 40 }
                            },
                            issues: [
                                { severity: 'recommendation', title: 'Brak Schema Markup', impact: 6, description: 'Schema.org daje rich snippets w Google', fix: 'Dodaj JSON-LD schema' }
                            ]
                        },
                        content: {
                            score: contentScore,
                            checks: {
                                word_count: { value: '450 s≈Ç√≥w', pass: true, score: 60 },
                                text_html_ratio: { value: '18.5%', pass: true, score: 100 },
                                readability: { value: '65 (≈Åatwy)', pass: true, score: 100 },
                                keyword_density: { value: '2.3% ("seo")', pass: true, score: 100 },
                                paragraphs: { value: '12 paragraf√≥w', pass: true, score: 100 }
                            },
                            issues: [
                                { severity: 'recommendation', title: 'Ma≈Ço tre≈õci: 450 s≈Ç√≥w', impact: 5, description: 'Optimal: 600-1500+ s≈Ç√≥w', fix: 'Rozbuduj content do minimum 600 s≈Ç√≥w' }
                            ]
                        }
                    },
                    all_issues: [],
                    quick_wins: []
                };
            };

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="gradient-bg text-white py-8">
                        <div className="container mx-auto px-4">
                            <h1 className="text-4xl font-bold mb-2">SEO AIditor</h1>
                            <p className="text-xl opacity-90">Profesjonalne Narzƒôdzie do Audytu SEO</p>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="container mx-auto px-4 py-12">
                        {!loading && !auditResults && (
                            <div className="max-w-3xl mx-auto">
                                <div className="bg-white rounded-2xl shadow-xl p-8 md:p-12">
                                    <h2 className="text-3xl font-bold mb-4 text-gray-800">
                                        Przeprowad≈∫ profesjonalny audyt SEO w 60 sekund
                                    </h2>
                                    <p className="text-gray-600 mb-8">
                                        Bez rejestracji ‚Ä¢ Raport PDF gratis ‚Ä¢ Szczeg√≥≈Çowa analiza 50+ parametr√≥w
                                    </p>

                                    <div className="mb-6">
                                        <input
                                            type="text"
                                            value={url}
                                            onChange={(e) => setUrl(e.target.value)}
                                            placeholder="https://twoja-strona.pl"
                                            className="w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none"
                                            onKeyPress={(e) => e.key === 'Enter' && runAudit()}
                                        />
                                    </div>

                                    <button
                                        onClick={runAudit}
                                        className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 px-8 rounded-xl text-xl font-semibold hover:from-purple-700 hover:to-indigo-700 transition-all transform hover:scale-105"
                                    >
                                        üöÄ ROZPOCZNIJ DARMOWY AUDYT
                                    </button>

                                    <div className="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                        <div className="flex items-center justify-center">
                                            <span className="text-green-600 mr-2">‚úì</span>
                                            <span className="text-gray-700">Bez rejestracji</span>
                                        </div>
                                        <div className="flex items-center justify-center">
                                            <span className="text-green-600 mr-2">‚úì</span>
                                            <span className="text-gray-700">Raport PDF gratis</span>
                                        </div>
                                        <div className="flex items-center justify-center">
                                            <span className="text-green-600 mr-2">‚úì</span>
                                            <span className="text-gray-700">50+ parametr√≥w</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {loading && (
                            <div className="max-w-2xl mx-auto">
                                <div className="bg-white rounded-2xl shadow-xl p-12">
                                    <h3 className="text-2xl font-bold mb-6 text-center text-gray-800">
                                        Analizujƒô TwojƒÖ stronƒô...
                                    </h3>

                                    <div className="mb-6">
                                        <div className="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                                            <div
                                                className="progress-bar h-full bg-gradient-to-r from-purple-600 to-indigo-600"
                                                style={{ width: `${progress}%` }}
                                            ></div>
                                        </div>
                                        <p className="text-center mt-3 text-gray-600 font-medium">{Math.round(progress)}%</p>
                                    </div>

                                    <div className="space-y-3">
                                        <div className="flex items-center text-gray-700">
                                            <span className="mr-3">{currentStep.includes('Pobieranie') ? '‚è≥' : '‚úÖ'}</span>
                                            <span>Sprawdzono dostƒôpno≈õƒá</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <span className="mr-3">{progress > 20 ? '‚úÖ' : '‚è≥'}</span>
                                            <span>Analiza techniczna</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <span className="mr-3">{progress > 40 ? '‚úÖ' : '‚è≥'}</span>
                                            <span>Sprawdzanie meta tag√≥w</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <span className="mr-3">{progress > 60 ? '‚úÖ' : '‚è≥'}</span>
                                            <span>Analiza struktury</span>
                                        </div>
                                        <div className="flex items-center text-gray-700">
                                            <span className="mr-3">{progress > 80 ? '‚úÖ' : '‚è≥'}</span>
                                            <span>Sprawdzanie indeksowania</span>
                                        </div>
                                    </div>

                                    <p className="text-center mt-6 text-gray-500">
                                        Pozosta≈Ço oko≈Ço {Math.max(0, Math.round((100 - progress) / 5))} sekund...
                                    </p>
                                </div>
                            </div>
                        )}

                        {auditResults && (
                            <AuditResults results={auditResults} onNewAudit={() => { setAuditResults(null); setUrl(''); }} />
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="bg-gray-800 text-white py-8 mt-20">
                        <div className="container mx-auto px-4 text-center">
                            <p className="text-gray-400">
                                ¬© 2024 SEO AIditor - Profesjonalne Narzƒôdzie do Audytu SEO
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        // Export functions
        function exportToCSV(results) {
            try {
                let csvContent = "Category,Check,Value,Pass,Score\n";

                // Add category data
                Object.entries(results.categories).forEach(([catName, catData]) => {
                    Object.entries(catData.checks || {}).forEach(([checkName, checkData]) => {
                        const value = (checkData.value || 'N/A').toString().replace(/,/g, ';');
                        csvContent += `${catName},${checkName},${value},${checkData.pass},${checkData.score}\n`;
                    });
                });

                csvContent += "\n\nSeverity,Title,Impact,Description,Fix\n";

                // Add issues
                Object.values(results.categories).forEach(catData => {
                    (catData.issues || []).forEach(issue => {
                        const desc = (issue.description || '').replace(/,/g, ';');
                        const fix = (issue.fix || '').replace(/,/g, ';');
                        csvContent += `${issue.severity},${issue.title},${issue.impact},"${desc}","${fix}"\n`;
                    });
                });

                // Download
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `seo_audit_${results.url.replace(/[^a-z0-9]/gi, '_')}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                alert('‚úÖ Raport CSV zosta≈Ç pobrany!');
            } catch (err) {
                alert('‚ùå B≈ÇƒÖd eksportu CSV: ' + err.message);
            }
        }

        function exportToJSON(results) {
            try {
                const jsonStr = JSON.stringify(results, null, 2);
                const blob = new Blob([jsonStr], { type: 'application/json' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `seo_audit_${results.url.replace(/[^a-z0-9]/gi, '_')}.json`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                alert('‚úÖ Raport JSON zosta≈Ç pobrany!');
            } catch (err) {
                alert('‚ùå B≈ÇƒÖd eksportu JSON: ' + err.message);
            }
        }

        function exportToPDF(results) {
            alert('üìÑ Funkcja PDF jest w rozwoju!\n\nU≈ºyj CSV lub JSON w miƒôdzyczasie.\n\nAby dodaƒá PDF export:\n1. Zainstaluj jsPDF: npm install jspdf\n2. Zobacz dokumentacjƒô w CONTRIBUTING.md');
        }

        function AuditResults({ results, onNewAudit }) {
            const [expandedCategory, setExpandedCategory] = useState(null);

            const getCategoryIcon = (category) => {
                const icons = {
                    technical: '‚öôÔ∏è',
                    onpage: 'üìù',
                    indexing: 'üîç',
                    content: 'üìÑ',
                    pagespeed: '‚ö°',
                    ai_content: 'ü§ñ'
                };
                return icons[category] || 'üìä';
            };

            const getCategoryName = (category) => {
                const names = {
                    technical: 'Fundamenty Techniczne',
                    onpage: 'Elementy On-Page',
                    indexing: 'Indeksowanie',
                    content: 'Jako≈õƒá Tre≈õci',
                    pagespeed: 'Wydajno≈õƒá',
                    ai_content: 'AI Content Quality'
                };
                return names[category] || category;
            };

            const getScoreColor = (score) => {
                if (score >= 90) return 'text-green-600';
                if (score >= 75) return 'text-lime-600';
                if (score >= 60) return 'text-yellow-600';
                if (score >= 40) return 'text-orange-600';
                return 'text-red-600';
            };

            const getProgressColor = (score) => {
                if (score >= 90) return 'bg-green-600';
                if (score >= 75) return 'bg-lime-500';
                if (score >= 60) return 'bg-yellow-500';
                if (score >= 40) return 'bg-orange-500';
                return 'bg-red-600';
            };

            const getSeverityBadge = (severity) => {
                const badges = {
                    critical: <span className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-semibold">KRYTYCZNE</span>,
                    important: <span className="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs font-semibold">WA≈ªNE</span>,
                    recommendation: <span className="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-semibold">REKOMENDACJA</span>
                };
                return badges[severity] || severity;
            };

            return (
                <div className="max-w-7xl mx-auto">
                    {/* Hero Score Section */}
                    <div className="bg-white rounded-2xl shadow-xl p-8 mb-8">
                        <div className="text-center">
                            <h2 className="text-3xl font-bold mb-6 text-gray-800">Wyniki Audytu SEO</h2>
                            <div className="flex justify-center items-center mb-6">
                                <div className="relative">
                                    <div className="w-48 h-48 rounded-full border-8 border-gray-200 flex items-center justify-center">
                                        <div className="text-center">
                                            <div className={`text-6xl font-bold ${results.grade.color}`}>
                                                {results.final_score}
                                            </div>
                                            <div className="text-gray-500 text-sm">/100</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h3 className={`text-2xl font-bold mb-2 ${results.grade.color}`}>
                                {results.grade.emoji} {results.grade.label}
                            </h3>
                            <p className="text-gray-600 mb-4">{results.url}</p>
                            <div className="flex justify-center gap-4">
                                <button
                                    onClick={onNewAudit}
                                    className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition"
                                >
                                    Nowy Audyt
                                </button>
                                <button
                                    onClick={() => exportToPDF(results)}
                                    className="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition"
                                >
                                    üìÑ Pobierz PDF
                                </button>
                                <button
                                    onClick={() => exportToCSV(results)}
                                    className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"
                                >
                                    üìä Eksportuj CSV
                                </button>
                                <button
                                    onClick={() => exportToJSON(results)}
                                    className="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition"
                                >
                                    üìã Eksportuj JSON
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Categories */}
                    <div className="space-y-4">
                        {Object.entries(results.categories).map(([categoryKey, categoryData]) => (
                            <div key={categoryKey} className="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                                <div className="p-6">
                                    <div
                                        className="flex items-center justify-between cursor-pointer"
                                        onClick={() => setExpandedCategory(expandedCategory === categoryKey ? null : categoryKey)}
                                    >
                                        <div className="flex items-center space-x-4 flex-1">
                                            <span className="text-3xl">{getCategoryIcon(categoryKey)}</span>
                                            <div className="flex-1">
                                                <h3 className="text-xl font-bold text-gray-800 mb-2">
                                                    {getCategoryName(categoryKey)}
                                                </h3>
                                                <div className="flex items-center space-x-4">
                                                    <div className="flex-1 bg-gray-200 rounded-full h-3 overflow-hidden">
                                                        <div
                                                            className={`h-full ${getProgressColor(categoryData.score)}`}
                                                            style={{ width: `${categoryData.score}%` }}
                                                        ></div>
                                                    </div>
                                                    <span className={`text-xl font-bold ${getScoreColor(categoryData.score)}`}>
                                                        {Math.round(categoryData.score)}/100
                                                    </span>
                                                </div>
                                            </div>
                                            <div className="text-gray-400">
                                                {expandedCategory === categoryKey ? '‚ñ≤' : '‚ñº'}
                                            </div>
                                        </div>
                                    </div>

                                    {expandedCategory === categoryKey && (
                                        <div className="mt-6 pt-6 border-t border-gray-200">
                                            {/* Checks */}
                                            <div className="mb-6">
                                                <h4 className="font-semibold text-gray-700 mb-3">Szczeg√≥≈Çy sprawdzenia:</h4>
                                                <div className="space-y-2">
                                                    {Object.entries(categoryData.checks || {}).map(([checkKey, checkData]) => (
                                                        <div key={checkKey} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                            <div className="flex items-center space-x-3">
                                                                <span className={checkData.pass ? 'text-green-600' : 'text-orange-600'}>
                                                                    {checkData.pass ? '‚úÖ' : '‚ö†Ô∏è'}
                                                                </span>
                                                                <div>
                                                                    <span className="font-medium text-gray-800 capitalize">
                                                                        {checkKey.replace(/_/g, ' ')}
                                                                    </span>
                                                                    {checkData.text && (
                                                                        <p className="text-sm text-gray-600 mt-1">{checkData.text}</p>
                                                                    )}
                                                                </div>
                                                            </div>
                                                            <span className="text-gray-600 font-medium">{checkData.value}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            {/* Issues */}
                                            {categoryData.issues && categoryData.issues.length > 0 && (
                                                <div>
                                                    <h4 className="font-semibold text-gray-700 mb-3">Problemy do naprawy:</h4>
                                                    <div className="space-y-3">
                                                        {categoryData.issues.map((issue, idx) => (
                                                            <div key={idx} className="border-l-4 border-orange-500 bg-orange-50 p-4 rounded-r-lg">
                                                                <div className="flex items-start justify-between mb-2">
                                                                    <div className="flex-1">
                                                                        <div className="flex items-center gap-2 mb-2">
                                                                            {getSeverityBadge(issue.severity)}
                                                                            <span className="text-xs text-gray-500">Impact: {issue.impact}/10</span>
                                                                        </div>
                                                                        <h5 className="font-bold text-gray-800 mb-1">{issue.title}</h5>
                                                                        <p className="text-sm text-gray-600 mb-2">{issue.description}</p>
                                                                        {issue.fix && (
                                                                            <div className="bg-white p-2 rounded border border-green-200">
                                                                                <span className="text-xs font-semibold text-green-700">‚úÖ RozwiƒÖzanie: </span>
                                                                                <span className="text-xs text-gray-700">{issue.fix}</span>
                                                                            </div>
                                                                        )}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* Quick Wins Section */}
                    <div className="mt-8 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl shadow-xl p-8">
                        <h3 className="text-2xl font-bold text-gray-800 mb-4">‚ö° Szybkie Wygrane (Quick Wins)</h3>
                        <p className="text-gray-600 mb-6">Wysokie efekty przy niskim wysi≈Çku - zacznij od tych:</p>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {Object.values(results.categories).flatMap(cat => cat.issues || [])
                                .filter(issue => issue.impact >= 6 && issue.severity !== 'critical')
                                .slice(0, 4)
                                .map((issue, idx) => (
                                    <div key={idx} className="bg-white p-4 rounded-lg border-2 border-green-200">
                                        <h4 className="font-bold text-gray-800 mb-2">{issue.title}</h4>
                                        <p className="text-sm text-gray-600 mb-2">{issue.description}</p>
                                        <div className="flex items-center justify-between">
                                            <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                                                Impact: {issue.impact}/10
                                            </span>
                                            <span className="text-xs text-gray-500">‚è±Ô∏è ~15-30 min</span>
                                        </div>
                                    </div>
                                ))}
                        </div>
                    </div>

                    {/* AI Action Plan Section */}
                    {results.ai_action_plan && !results.ai_action_plan.disabled && !results.ai_action_plan.error && (
                        <div className="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl shadow-lg p-8 mt-8">
                            <div className="flex items-center mb-6">
                                <span className="text-4xl mr-3">ü§ñ</span>
                                <div>
                                    <h3 className="text-2xl font-bold text-gray-800">AI-Powered Action Plan</h3>
                                    <p className="text-gray-600">Personalized roadmap generated by Gemini 2.5 Flash</p>
                                </div>
                            </div>

                            {/* Overall Strategy */}
                            {results.ai_action_plan.action_plan && results.ai_action_plan.action_plan.overall_strategy && (
                                <div className="bg-white rounded-lg p-6 mb-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">üìã Overall Strategy</h4>
                                    <div className="grid md:grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <span className="font-semibold text-gray-700">Primary Focus:</span>
                                            <p className="text-gray-600">{results.ai_action_plan.action_plan.overall_strategy.primary_focus}</p>
                                        </div>
                                        <div>
                                            <span className="font-semibold text-gray-700">Timeline:</span>
                                            <p className="text-gray-600">{results.ai_action_plan.action_plan.overall_strategy.estimated_time_to_improvement}</p>
                                        </div>
                                        <div>
                                            <span className="font-semibold text-gray-700">Difficulty:</span>
                                            <span className="ml-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">
                                                {results.ai_action_plan.action_plan.overall_strategy.difficulty_level}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* AI Quick Wins */}
                            {results.ai_action_plan.quick_wins && results.ai_action_plan.quick_wins.length > 0 && (
                                <div className="bg-white rounded-lg p-6 mb-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-4 flex items-center">
                                        <span className="mr-2">‚ö°</span>
                                        AI Quick Wins (High Impact, Low Effort)
                                    </h4>
                                    <div className="space-y-4">
                                        {results.ai_action_plan.quick_wins.slice(0, 3).map((win, index) => (
                                            <div key={index} className="border-l-4 border-green-500 pl-4 py-2">
                                                <div className="flex items-center justify-between mb-1">
                                                    <h5 className="font-semibold text-gray-800">{win.title}</h5>
                                                    <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                                                        {win.estimated_time}
                                                    </span>
                                                </div>
                                                <p className="text-sm text-gray-600 mb-2">{win.description}</p>
                                                <p className="text-xs text-purple-600 font-semibold">
                                                    Expected Impact: {win.expected_impact}
                                                </p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* Roadmap Tabs */}
                            {results.ai_action_plan.roadmap && (
                                <div className="bg-white rounded-lg p-6 mb-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-4">üìÖ Implementation Roadmap</h4>
                                    <div className="space-y-4">
                                        {/* 30 Days */}
                                        {results.ai_action_plan.roadmap['30_days'] && results.ai_action_plan.roadmap['30_days'].length > 0 && (
                                            <div>
                                                <h5 className="font-semibold text-gray-700 mb-2">30 Days</h5>
                                                <div className="space-y-2">
                                                    {results.ai_action_plan.roadmap['30_days'].slice(0, 3).map((task, idx) => (
                                                        <div key={idx} className="flex items-start bg-blue-50 p-3 rounded-lg">
                                                            <span className="font-bold text-blue-600 mr-3">{task.priority}</span>
                                                            <div className="flex-1">
                                                                <div className="font-semibold text-gray-800">{task.action}</div>
                                                                <div className="text-sm text-gray-600">{task.description}</div>
                                                                <div className="text-xs text-gray-500 mt-1">
                                                                    Impact: <span className="font-semibold">{task.estimated_impact}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {/* 60 Days */}
                                        {results.ai_action_plan.roadmap['60_days'] && results.ai_action_plan.roadmap['60_days'].length > 0 && (
                                            <div>
                                                <h5 className="font-semibold text-gray-700 mb-2">60 Days</h5>
                                                <div className="space-y-2">
                                                    {results.ai_action_plan.roadmap['60_days'].slice(0, 2).map((task, idx) => (
                                                        <div key={idx} className="flex items-start bg-indigo-50 p-3 rounded-lg">
                                                            <span className="font-bold text-indigo-600 mr-3">{task.priority}</span>
                                                            <div className="flex-1">
                                                                <div className="font-semibold text-gray-800">{task.action}</div>
                                                                <div className="text-sm text-gray-600">{task.description}</div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {/* 90 Days */}
                                        {results.ai_action_plan.roadmap['90_days'] && results.ai_action_plan.roadmap['90_days'].length > 0 && (
                                            <div>
                                                <h5 className="font-semibold text-gray-700 mb-2">90 Days</h5>
                                                <div className="space-y-2">
                                                    {results.ai_action_plan.roadmap['90_days'].slice(0, 2).map((task, idx) => (
                                                        <div key={idx} className="flex items-start bg-purple-50 p-3 rounded-lg">
                                                            <span className="font-bold text-purple-600 mr-3">{task.priority}</span>
                                                            <div className="flex-1">
                                                                <div className="font-semibold text-gray-800">{task.action}</div>
                                                                <div className="text-sm text-gray-600">{task.description}</div>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* Score Progression */}
                            {results.ai_action_plan.estimated_impact && (
                                <div className="bg-white rounded-lg p-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-4">üìä Estimated Score Progression</h4>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-gray-800">{results.ai_action_plan.estimated_impact.current}</div>
                                            <div className="text-xs text-gray-600">Current</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-blue-600">{results.ai_action_plan.estimated_impact.after_30_days}</div>
                                            <div className="text-xs text-gray-600">30 Days</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-indigo-600">{results.ai_action_plan.estimated_impact.after_60_days}</div>
                                            <div className="text-xs text-gray-600">60 Days</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-3xl font-bold text-purple-600">{results.ai_action_plan.estimated_impact.after_90_days}</div>
                                            <div className="text-xs text-gray-600">90 Days</div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* AI Content Insights Section */}
                    {results.categories.ai_content && !results.categories.ai_content.insights?.disabled && (
                        <div className="bg-gradient-to-br from-green-50 to-teal-50 rounded-xl shadow-lg p-8 mt-8">
                            <div className="flex items-center mb-6">
                                <span className="text-4xl mr-3">üéØ</span>
                                <div>
                                    <h3 className="text-2xl font-bold text-gray-800">AI Content Insights</h3>
                                    <p className="text-gray-600">Deep content analysis by Gemini 2.5 Flash</p>
                                </div>
                            </div>

                            {/* Search Intent */}
                            {results.categories.ai_content.insights?.search_intent && (
                                <div className="bg-white rounded-lg p-6 mb-4">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">üîç Search Intent Analysis</h4>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <span className="text-sm text-gray-600">Detected Intent:</span>
                                            <div className="text-xl font-semibold text-gray-800 capitalize">
                                                {results.categories.ai_content.insights.search_intent.detected_intent}
                                            </div>
                                        </div>
                                        <div>
                                            <span className="text-sm text-gray-600">Match Score:</span>
                                            <div className="text-xl font-semibold text-green-600">
                                                {results.categories.ai_content.insights.search_intent.intent_match_score}/100
                                            </div>
                                        </div>
                                    </div>
                                    <p className="text-sm text-gray-600 mt-3">
                                        {results.categories.ai_content.insights.search_intent.explanation}
                                    </p>
                                </div>
                            )}

                            {/* E-E-A-T Signals */}
                            {results.categories.ai_content.insights?.eeat && (
                                <div className="bg-white rounded-lg p-6 mb-4">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">‚≠ê E-E-A-T Signals</h4>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        <div>
                                            <div className="text-sm text-gray-600">Experience</div>
                                            <div className="text-2xl font-bold text-blue-600">
                                                {results.categories.ai_content.insights.eeat.experience_score}
                                            </div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-600">Expertise</div>
                                            <div className="text-2xl font-bold text-indigo-600">
                                                {results.categories.ai_content.insights.eeat.expertise_score}
                                            </div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-600">Authoritativeness</div>
                                            <div className="text-2xl font-bold text-purple-600">
                                                {results.categories.ai_content.insights.eeat.authoritativeness_score}
                                            </div>
                                        </div>
                                        <div>
                                            <div className="text-sm text-gray-600">Trust</div>
                                            <div className="text-2xl font-bold text-green-600">
                                                {results.categories.ai_content.insights.eeat.trustworthiness_score}
                                            </div>
                                        </div>
                                    </div>
                                    {results.categories.ai_content.insights.eeat.findings && (
                                        <div className="text-sm text-gray-600">
                                            <strong>Findings:</strong>
                                            <ul className="list-disc list-inside mt-2">
                                                {results.categories.ai_content.insights.eeat.findings.slice(0, 3).map((finding, idx) => (
                                                    <li key={idx}>{finding}</li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Content Depth */}
                            {results.categories.ai_content.insights?.content_depth && (
                                <div className="bg-white rounded-lg p-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">üìö Content Depth Analysis</h4>
                                    <div className="mb-3">
                                        <span className="text-sm text-gray-600">Depth Score:</span>
                                        <div className="text-2xl font-bold text-purple-600">
                                            {results.categories.ai_content.insights.content_depth.depth_score}/100
                                        </div>
                                    </div>
                                    {results.categories.ai_content.insights.content_depth.missing_topics && (
                                        <div className="text-sm">
                                            <strong className="text-gray-700">Content Gaps:</strong>
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {results.categories.ai_content.insights.content_depth.missing_topics.slice(0, 5).map((topic, idx) => (
                                                    <span key={idx} className="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-xs">
                                                        {topic}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* Conversion Optimization (NEW!) */}
                            {results.categories.ai_content.insights?.conversion && (
                                <div className="bg-white rounded-lg p-6 mb-4">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">üí∞ Conversion Optimization</h4>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <span className="text-sm text-gray-600">CTA Presence:</span>
                                            <div className="text-xl font-semibold text-gray-800 capitalize">
                                                {results.categories.ai_content.insights.conversion.cta_presence}
                                            </div>
                                        </div>
                                        <div>
                                            <span className="text-sm text-gray-600">Conversion Blockers:</span>
                                            <div className="text-sm text-red-600">
                                                {results.categories.ai_content.insights.conversion.conversion_blockers?.length || 0} found
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Business Value Assessment (NEW!) */}
                            {results.categories.ai_content.insights?.business_value && (
                                <div className="bg-white rounded-lg p-6">
                                    <h4 className="text-lg font-bold text-gray-800 mb-3">üìä Business Value</h4>
                                    <div className="grid grid-cols-3 gap-4 mb-3">
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-blue-600">
                                                {results.categories.ai_content.insights.business_value.target_audience_clarity}
                                            </div>
                                            <div className="text-xs text-gray-600">Audience Clarity</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-indigo-600">
                                                {results.categories.ai_content.insights.business_value.value_proposition_clarity}
                                            </div>
                                            <div className="text-xs text-gray-600">Value Prop</div>
                                        </div>
                                        <div className="text-center">
                                            <div className="text-2xl font-bold text-purple-600">
                                                {results.categories.ai_content.insights.business_value.differentiation_strength}
                                            </div>
                                            <div className="text-xs text-gray-600">Differentiation</div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* Executive Summary (NEW!) */}
                            {results.categories.ai_content.insights?.summary && (
                                <div className="bg-gradient-to-r from-purple-100 to-indigo-100 rounded-lg p-6 mt-4">
                                    <h4 className="text-lg font-bold text-gray-800 mb-2">üìù Executive Summary</h4>
                                    <p className="text-gray-700 italic">{results.categories.ai_content.insights.summary}</p>
                                    {results.categories.ai_content.insights.primary_recommendation && (
                                        <div className="mt-3 pt-3 border-t border-gray-300">
                                            <strong className="text-purple-700">Primary Recommendation:</strong>
                                            <p className="text-gray-800 mt-1">{results.categories.ai_content.insights.primary_recommendation}</p>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
