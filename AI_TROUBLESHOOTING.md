# ğŸ”§ Troubleshooting - Dlaczego nie widzÄ™ AI insights?

## Problem: Sekcje AI nie pojawiajÄ… siÄ™ w wynikach audytu

### âœ… Szybkie rozwiÄ…zania

#### 1. **SprawdÅº czy AI jest wÅ‚Ä…czone**

**Plik:** `config.py` (linia 13)
```python
ENABLE_AI_ANALYSIS = True  # Musi byÄ‡ True!
```

JeÅ›li jest `False` â†’ zmieÅ„ na `True` i zrestartuj backend.

---

#### 2. **SprawdÅº czy klucz Gemini jest wpisany**

**Plik:** `config_local.py`
```python
GEMINI_API_KEY = "AIzaSy..."  # Musi byÄ‡ prawdziwy klucz, nie placeholder!
```

**Jak sprawdziÄ‡:**
```bash
python ai_engine.py
```

**Powinno byÄ‡:**
```
âœ… Gemini AI Engine initialized successfully
âœ… AI Engine is ready!
```

**JeÅ›li bÅ‚Ä…d:**
- Klucz nieprawidÅ‚owy â†’ Wygeneruj nowy na https://aistudio.google.com/apikey
- Brak internetu â†’ SprawdÅº poÅ‚Ä…czenie
- Quota exceeded â†’ Przekroczono limit 1,500 zapytaÅ„/dzieÅ„

---

#### 3. **SprawdÅº logi backendu (terminal)**

Po uruchomieniu `python app.py`, podczas audytu powinno byÄ‡ widoczne:

```
Starting audit for: https://example.com
  - Technical analysis...
  - On-page analysis...
  - Indexing analysis...
  - Content analysis...
  - PageSpeed analysis...
  - AI Content Quality analysis (Gemini 2.5 Flash)...    <-- TO MUSI BYÄ†!
    AI Content Score: 75/100
  - Generating AI Action Plan...                         <-- TO TEÅ»!
    âœ“ Generated action plan with 5 AI quick wins
Audit complete!
```

**JeÅ›li NIE ma powyÅ¼szych linii AI:**
- SprawdÅº kroki 1 i 2
- Zobacz bÅ‚Ä™dy w terminalu (czerwony tekst)
- SprawdÅº czy `google-genai` jest zainstalowany: `pip list | grep google-genai`

---

#### 4. **Gdzie dokÅ‚adnie pojawiajÄ… siÄ™ sekcje AI?**

**Lokalizacja w UI:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wyniki Audytu SEO                   â”‚  <- GÅ‚Ã³wny wynik (score)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Kategorie (Technical, On-Page...)   â”‚  <- ZwykÅ‚e kategorie
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quick Wins                           â”‚  <- Szybkie akcje
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¤– AI-Powered Action Plan           â”‚  <- SEKCJA AI #1 (fioletowe tÅ‚o)
â”‚   - Overall Strategy                 â”‚
â”‚   - AI Quick Wins                    â”‚
â”‚   - 30/60/90 Day Roadmap            â”‚
â”‚   - Score Progression                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ğŸ¯ AI Content Insights              â”‚  <- SEKCJA AI #2 (zielone tÅ‚o)
â”‚   - Search Intent Analysis           â”‚
â”‚   - E-E-A-T Signals (4 wskaÅºniki)   â”‚
â”‚   - Content Depth Analysis           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charakterystyka:**
- **Fioletowe/purpurowe tÅ‚o** (AI Action Plan)
- **Zielone tÅ‚o** (AI Content Insights)
- Ikona ğŸ¤– lub ğŸ¯ w nagÅ‚Ã³wku
- Tekst "Generated by Gemini 2.5 Flash"

**JeÅ›li ich nie widzisz:**
- PrzewiÅ„ stronÄ™ w dÃ³Å‚ (sÄ… pod Quick Wins!)
- SprawdÅº konsolÄ™ przeglÄ…darki (F12) â†’ szukaj bÅ‚Ä™dÃ³w JavaScript
- OdÅ›wieÅ¼ stronÄ™ (Ctrl+F5 / Cmd+Shift+R)

---

## ğŸ” Diagnostyka krok po kroku

### Test 1: SprawdÅº backend
```bash
cd x:\Aplikacje\seo-aiditor
python app.py
```

Czekaj na: `Running on http://127.0.0.1:5000`

### Test 2: SprawdÅº AI Engine
```bash
python ai_engine.py
```

**Oczekiwany output:**
```
Testing AI Engine...
âœ… Gemini AI Engine initialized successfully
âœ… AI Engine is ready!

Test Result: {"sentiment": "positive", "summary": "brief summary"}
```

**BÅ‚Ä™dy i rozwiÄ…zania:**

| BÅ‚Ä…d | Przyczyna | RozwiÄ…zanie |
|------|-----------|-------------|
| `ModuleNotFoundError: No module named 'google.genai'` | Brak biblioteki | `pip install google-genai` |
| `API key not valid` | NieprawidÅ‚owy klucz | Wygeneruj nowy klucz |
| `AI Engine not available` | Placeholder w config | Wpisz prawdziwy klucz w `config_local.py` |
| `403 Forbidden` | Restrykcje API key | UsuÅ„ restrykcje w Google Cloud Console |
| `Network error` | Brak internetu | SprawdÅº poÅ‚Ä…czenie |

### Test 3: SprawdÅº config_local.py
```bash
# Windows
type config_local.py

# Mac/Linux
cat config_local.py
```

**Powinno zawieraÄ‡:**
```python
GOOGLE_PSI_API_KEY = "AIza..."  # Prawdziwy klucz PageSpeed
GEMINI_API_KEY = "AIza..."      # Prawdziwy klucz Gemini (inny niÅ¼ PSI!)
```

### Test 4: Uruchom peÅ‚ny audyt z logami
```bash
python app.py
```

W drugiej konsoli/przeglÄ…darce:
1. OtwÃ³rz `http://localhost:5000` lub `index.html`
2. Wpisz URL: `https://example.com`
3. Kliknij "Rozpocznij Audyt"
4. **Obserwuj pierwszy terminal** - szukaj linii z "AI"

---

## ğŸš¨ NajczÄ™stsze problemy

### Problem #1: "AI not available - check API key"

**Przyczyna:** Klucz Gemini nie jest wpisany lub nieprawidÅ‚owy

**Fix:**
1. OtwÃ³rz `config_local.py`
2. SprawdÅº liniÄ™: `GEMINI_API_KEY = "..."`
3. JeÅ›li jest `"YOUR_GEMINI_API_KEY_HERE"` â†’ wpisz prawdziwy klucz
4. Klucz musi zaczynaÄ‡ siÄ™ od `AIza...`
5. Zrestartuj `python app.py`

---

### Problem #2: Sekcje AI sÄ… puste (brak danych)

**Przyczyna:** API zwrÃ³ciÅ‚o bÅ‚Ä…d ale gracefully degraded

**Fix:**
1. SprawdÅº logi backendu - szukaj:
   ```
   Warning: AI Content analysis failed: <error>
   Warning: AI Action Plan failed: <error>
   ```
2. NajczÄ™stsze bÅ‚Ä™dy:
   - **"Invalid JSON"** â†’ Problem z parsowaniem odpowiedzi AI (retry help)
   - **"Timeout"** â†’ Strona zbyt duÅ¼a lub wolny internet
   - **"Quota exceeded"** â†’ Przekroczono limit 1,500/day

---

### Problem #3: Backend crashuje po dodaniu AI

**Przyczyna:** Konflikt wersji bibliotek lub bÅ‚Ä…d w kodzie

**Fix:**
1. Odinstaluj i zainstaluj na nowo:
   ```bash
   pip uninstall google-genai
   pip install google-genai>=0.3.0
   ```
2. SprawdÅº wersjÄ™ Pythona:
   ```bash
   python --version  # Musi byÄ‡ 3.8+
   ```
3. Zobacz peÅ‚ny stack trace w terminalu

---

### Problem #4: "ModuleNotFoundError: No module named 'config_local'"

**Przyczyna:** Brak pliku `config_local.py`

**Fix:**
```bash
# Skopiuj przykÅ‚adowy plik
copy config_local.example.py config_local.py   # Windows
cp config_local.example.py config_local.py     # Mac/Linux

# Edytuj i wstaw klucze
notepad config_local.py   # Windows
nano config_local.py      # Mac/Linux
```

---

### Problem #5: DziaÅ‚a lokalnie, ale nie widaÄ‡ AI w frontend

**Przyczyna:** Frontend nie otrzymuje danych AI z backendu

**Fix:**
1. OtwÃ³rz DevTools (F12) â†’ Console
2. Szukaj bÅ‚Ä™dÃ³w JavaScript (czerwone)
3. SprawdÅº Network tab â†’ znajdÅº request `/api/audit`
4. Zobacz response â†’ czy zawiera klucze `ai_content` i `ai_action_plan`?

**JeÅ›li NIE:**
- Backend nie zwraca AI danych â†’ zobacz logi backendu
- CORS error â†’ sprawdÅº `flask-cors` instalacjÄ™

**JeÅ›li TAK (sÄ… w response):**
- Problem z renderowaniem UI
- SprawdÅº czy sekcje nie sÄ… ukryte przez CSS
- Ctrl+F5 (force refresh)

---

## ğŸ“ Checklist debugowania

Wykonaj krok po kroku:

- [ ] `ENABLE_AI_ANALYSIS = True` w `config.py`
- [ ] `config_local.py` istnieje i ma klucz Gemini
- [ ] `python ai_engine.py` â†’ "âœ… AI Engine is ready!"
- [ ] `pip list | grep google-genai` â†’ zainstalowane
- [ ] Backend wyÅ›wietla linie "AI Content Quality analysis..."
- [ ] Browser Console (F12) â†’ brak bÅ‚Ä™dÃ³w JavaScript
- [ ] Network tab â†’ `/api/audit` response zawiera `ai_content` i `ai_action_plan`
- [ ] PrzewinÄ…Å‚em stronÄ™ w dÃ³Å‚ (pod Quick Wins)
- [ ] OdÅ›wieÅ¼yÅ‚em przeglÄ…darkÄ™ (Ctrl+F5)

JeÅ›li wszystko âœ… a dalej nie dziaÅ‚a â†’ otwÃ³rz GitHub Issue z logami!

---

## ğŸ†˜ Dalej nie dziaÅ‚a?

**Zbierz informacje:**

1. **Wersja Pythona:** `python --version`
2. **Zainstalowane biblioteki:** `pip list`
3. **Logi backendu:** Skopiuj OUTPUT z `python app.py`
4. **Console bÅ‚Ä™dy:** F12 â†’ Console â†’ screenshot
5. **Network response:** F12 â†’ Network â†’ `/api/audit` â†’ Response â†’ screenshot

**OtwÃ³rz issue:**
https://github.com/maciusman/seo-aiditor/issues

Podaj wszystkie zebrane informacje!

---

## ğŸ’¡ Szybki test end-to-end

**Uruchom to w terminalu:**

```bash
# Test 1: AI Engine
python ai_engine.py

# Test 2: Backend
python app.py &

# Poczekaj 3 sekundy

# Test 3: Curl audit (z loggingiem)
curl -X POST http://localhost:5000/api/audit \
  -H "Content-Type: application/json" \
  -d '{"url":"https://example.com"}' \
  | python -m json.tool | grep -A 5 "ai_content"
```

**Powinno zwrÃ³ciÄ‡:**
```json
"ai_content": {
  "score": 75,
  "insights": {
    "search_intent": {...},
    "eeat": {...}
  }
}
```

JeÅ›li dostaniesz powyÅ¼sze â†’ AI dziaÅ‚a! Problem jest w frontend.

---

**Pytania? Zobacz:** [GEMINI_API_SETUP.md](GEMINI_API_SETUP.md) sekcja Troubleshooting
